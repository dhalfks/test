<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>나이구하기</title>
    <!-- input을 이용하여 이름, 주민등록번호를 입력받아 -->
    <!-- 이름, 생년월일, 나이, 성별을 출력 -->
</head>
<body>
    이름 : <input type="text" id="name"><br>
    주민번호 : <input type="text" id="rNum"><br>
    <button type="button" id="btn" onclick="result();" >계산</button>
    <h3 id="result">

    </h3>
    <script>
        // let rNum  = "811210-2222222";
        function result(){
             let name = document.getElementById('name').value;
             let rNum = document.getElementById('rNum').value;
     
             let now = new Date();
             let birth = rNum.substring(0, rNum.indexOf("-"));
             console.log(birth);
             let getNumber = rNum.charAt(8);
             let str = ((getNumber < 3) ? 19 : 20)+birth.substr(0,2) + "-"
                + birth.substr(2,2)+"-"+ birth.substr(4,2);
             console.log(str);
             let birth2 = new Date(str);
             let week = birth2.getDay();
             let week2 = '';
             switch(week){
                case 0: week2='일'; break;
                case 1: week2='월'; break;
                case 2: week2='화'; break;
                case 3: week2='수'; break;
                case 4: week2='목'; break;
                case 5: week2='금'; break;
                case 6: week2='토'; break;
             }
            //  let birthDate = new Date(birth);
             console.log(birth2);
             let year = Number(birth.substring(0,2));
             console.log(year);
            //  let age = now.getFullYear() - (year + 1900)+1;
            
            let age = now.getFullYear() - (year + ((getNumber < 3) ? 1900 : 2000))+1;
            console.log(age);
            let maw = "";

            if (getNumber == 1 || getNumber == 3){
                maw = "남";
            }else {
                maw = "여";
            }

            document.getElementById('result').innerText
            =`이름: ${name}, 생년월일: ${birth2.toLocaleDateString()}(${week2}), 
            나이: ${age}, 성별: ${maw}`;
         }

    </script>
</body>
</html>